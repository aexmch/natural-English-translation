<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinglish Lab - 動詞與結構專項訓練</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM CDN -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel CDN for JSX compilation in browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 selection:bg-indigo-100 selection:text-indigo-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- SVG 圖標組件 ---
        const Icon = ({ name, className = "w-6 h-6" }) => {
            const icons = {
                trophy: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>,
                star: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>,
                flame: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>,
                book: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1-2.5-2.5Z"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2Z"/></svg>,
                languages: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m5 8 6 6"/><path d="m4 14 6-6 2-3"/><path d="M2 5h12"/><path d="M7 2h1"/><path d="m22 22-5-10-5 10"/><path d="M14 18h6"/></svg>,
                message: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>,
                info: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>,
                check: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="20 6 9 17 4 12"/></svg>,
                chevron: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="9 18 15 12 9 6"/></svg>,
                refresh: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 16h5v5"/></svg>,
                party: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M14 21a7 7 0 1 1 0-14 7 7 0 0 1 0 14z"/><path d="m14 14 7 7"/><path d="m14 14-7-7"/></svg>
            };
            return icons[name] || null;
        };

        // --- 分類標籤組件 (改為標準 Function 以避免 ReferenceError) ---
        function CategoryBadge({ category }) {
            const colors = {
                "物當主詞 (Say vs Write)": "bg-blue-100 text-blue-700",
                "建議句型陷阱 (Suggest)": "bg-red-100 text-red-700",
                "不定詞結構 (To V)": "bg-indigo-100 text-indigo-700",
                "物當主詞 (Read/Say)": "bg-blue-100 text-blue-700",
                "察覺 vs 告知 (Notice/Inform)": "bg-purple-100 text-purple-700",
                "動詞搭配 (Forbid from)": "bg-green-100 text-green-700",
                "提醒 vs 察覺": "bg-orange-100 text-orange-700",
                "使役與聯想 (Remind of)": "bg-teal-100 text-teal-700",
                "簡潔動詞用法": "bg-emerald-100 text-emerald-700",
                "證明 (Prove vs Say)": "bg-cyan-100 text-cyan-700",
                "法律要求句型 (Require)": "bg-rose-100 text-rose-700",
                "不定詞結構 (Invite)": "bg-indigo-100 text-indigo-700",
                "學術搭配詞 (Indicate)": "bg-slate-100 text-slate-700",
                "物當主詞 (Read)": "bg-blue-100 text-blue-700",
                "防止句型 (Prevent from)": "bg-green-100 text-green-700",
                "正式討論 (Discuss)": "bg-violet-100 text-violet-700",
                "顯示 (Show vs Tell)": "bg-sky-100 text-sky-700",
                "解釋 (Explain)": "bg-amber-100 text-amber-700"
            };
            return (
                <span className={`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider ${colors[category] || "bg-gray-100 text-gray-700"}`}>
                    {category}
                </span>
            );
        }

        const quizData = [
            { id: 1, chinese: "書上寫著明天會下雨。", chinglish: "The book wrote it will rain tomorrow.", natural: "The book says it will rain tomorrow.", alternatives: ["The book reads 'it will rain tomorrow'.", "According to the book, it will rain tomorrow."], category: "物當主詞 (Say vs Write)", analysis: "中文說『寫著』，但英文中書本、菜單、報紙、信件『說話』是用 says，或是 reads (讀起來是)。", explanation: "Write 動作必須由人執行。物當主詞表達內容時，首選 says。" },
            { id: 2, chinese: "菜單上說這道菜很辣。", chinglish: "The menu wrote this dish is spicy.", natural: "The menu says this dish is spicy.", alternatives: ["The menu lists this dish as spicy."], category: "物當主詞 (Say vs Write)", analysis: "同上題，菜單、標誌等靜態物體表達訊息時，英文習慣用 says。", explanation: "想像這些物品在向讀者『說話』。" },
            { id: 3, chinese: "醫生建議我要多休息。", chinglish: "The doctor suggested me to rest more.", natural: "The doctor suggested that I rest more.", alternatives: ["The doctor suggested resting more.", "The doctor recommended that I get more rest."], category: "建議句型陷阱 (Suggest)", analysis: "Suggest 後面絕對不能接 'someone to do sth'。必須接 'that 子句' 或 'V-ing'。", explanation: "這是最經典的 Chinglish 陷阱。請背誦：Suggest doing 或 Suggest that..." },
            { id: 4, chinese: "老師要求我們準時交作業。", chinglish: "The teacher requested us submit homework on time.", natural: "The teacher requested us to submit homework on time.", alternatives: ["The teacher requested that we submit homework on time."], category: "不定詞結構 (To V)", analysis: "Request/Require/Order 某人做某事，必須加 'to'。中文直接串連動詞，英文需要不定詞橋樑。", explanation: "記住 V + Obj + to + V 的結構。" },
            { id: 5, chinese: "標籤上標示著『僅限乾洗』。", chinglish: "The label wrote 'Dry Clean Only'.", natural: "The label reads 'Dry Clean Only'.", alternatives: ["The label says 'Dry Clean Only'."], category: "物當主詞 (Read/Say)", analysis: "標籤、時鐘、溫度計『讀起來是』，英文專用動詞 read。", explanation: "Read 不只是閱讀，也可以指儀器或文字呈現的數值/內容。" },
            { id: 6, chinese: "電子郵件通知我面試的時間。", chinglish: "The email noticed me the interview time.", natural: "The email informed me of the interview time.", alternatives: ["The email notified me of the interview time.", "The email told me when the interview is."], category: "察覺 vs 告知 (Notice/Inform)", analysis: "Notice 是你自己『看見、察覺到』。電子郵件『主動告知』你，應使用 inform 或 notify。", explanation: "中文『通知』在英文有『我看到』和『它告訴我』的語意差別。" },
            { id: 7, chinese: "我看到他的臉色，發現他不高興。", chinglish: "I saw his face and informed he was unhappy.", natural: "I saw his face and noticed he was unhappy.", alternatives: ["I could tell from his face that he was unhappy."], category: "察覺 vs 告知 (Notice/Inform)", analysis: "這題反過來。是你『察覺』到他的情緒，不是他『正式函告』你。應用 notice。", explanation: "Notice 常用於感官觀察後的發現。" },
            { id: 8, chinese: "這條法律禁止人們在這裡抽菸。", chinglish: "This law forbids people smoke here.", natural: "This law forbids people from smoking here.", alternatives: ["This law prohibits smoking here.", "The law forbids people to smoke here."], category: "動詞搭配 (Forbid from)", analysis: "Forbid 某人做某事，道地搭配是 forbid someone from doing 或 forbid someone to do。", explanation: "中文直譯會漏掉介系詞 from 或 to。" },
            { id: 9, chinese: "鬧鐘提醒我該起床了。", chinglish: "The alarm noticed me to wake up.", natural: "The alarm reminded me to wake up.", alternatives: ["The alarm told me it's time to get up."], category: "提醒 vs 察覺", analysis: "鬧鐘的作用是『提醒』(remind)，而非鬧鐘自己『察覺』(notice)你要起床。", explanation: "選擇能表達動作功能功能的動詞。" },
            { id: 10, chinese: "這張照片讓我想起童年。", chinglish: "This photo makes me remember my childhood.", natural: "This photo reminds me of my childhood.", alternatives: ["This photo brings back memories of my childhood."], category: "使役與聯想 (Remind of)", analysis: "中文說『讓我想起』，英文有一個專門的詞：remind someone of something。", explanation: "不要只會用 make me remember，remind of 更地道。" },
            { id: 11, chinese: "這則新聞讓我感到很震驚。", chinglish: "This news made me feel shocked.", natural: "The news shocked me.", alternatives: ["I was shocked by the news."], category: "簡潔動詞用法", analysis: "中文習慣說 A 讓 B 感到...，但英文常直接把心理動詞當成動作。", explanation: "直接說 The news shocked me 比用 make me feel 更強而有力。" },
            { id: 12, chinese: "收據證明了我已經付過錢。", chinglish: "The receipt says I paid.", natural: "The receipt proves that I have paid.", alternatives: ["The receipt is proof of payment."], category: "證明 (Prove vs Say)", analysis: "雖然可以用 says，但表達『法律或事實上的證明』，用 prove 更精確。", explanation: "根據語境選擇更具權威性的動詞。" },
            { id: 13, chinese: "這份合約要求房客支付押金。", chinglish: "The contract requests the tenant pay the deposit.", natural: "The contract requires the tenant to pay a deposit.", alternatives: ["The tenant is required to pay a deposit according to the contract."], category: "法律要求句型 (Require)", analysis: "法律、合約的『要求/強制』，首選 require + Obj + to V。", explanation: "Request 比較像禮貌請求，合約通常是強制要求。" },
            { id: 14, chinese: "廣告邀請我們參加活動。", chinglish: "The advertisement invited us join the event.", natural: "The advertisement invited us to join the event.", alternatives: ["We were invited to the event by the ad."], category: "不定詞結構 (Invite)", analysis: "Invite someone 'to' do something。漏掉 to 是常見錯誤。", explanation: "只要是『勸誘/請求/命令』類動詞，後面接動作通常都要 to。" },
            { id: 15, chinese: "研究指出運動對大腦有益。", chinglish: "The research pointed out exercise is good for the brain.", natural: "The research indicates that exercise is good for the brain.", alternatives: ["The study suggests that...", "Research shows that..."], category: "學術搭配詞 (Indicate)", analysis: "『指出/顯示』研究結果，學術語境常用 indicate 或 suggest。", explanation: "Point out 通常用於人『指正』某個錯誤或事實。" },
            { id: 16, chinese: "時鐘現在顯示午夜十二點。", chinglish: "The clock now shows 12:00.", natural: "The clock reads midnight.", alternatives: ["It is midnight."], category: "物當主詞 (Read)", analysis: "時鐘顯示時間，英文特愛用 read。", explanation: "這是一個中文完全不會聯想到的搭配詞。" },
            { id: 17, chinese: "這項政策防止了員工過勞。", chinglish: "This policy doesn't let employees overwork.", natural: "This policy prevents employees from overworking.", alternatives: ["The policy stops employees from working too much."], category: "防止句型 (Prevent from)", analysis: "中文說『不讓...』，英文用 prevent/stop someone from doing 更專業。", explanation: "不要什麼都用 let 或 don't let。" },
            { id: 18, chinese: "文章討論了氣候變遷。", chinglish: "The article talked about climate change.", natural: "The article discusses climate change.", alternatives: ["The article covers climate change."], category: "正式討論 (Discuss)", analysis: "文章、書籍『探討』主題，用 discuss 比 talk about 更正式。", explanation: "Talk 偏向口語對話。" },
            { id: 19, chinese: "地圖顯示我們在哪裡。", chinglish: "The map tells us where we are.", natural: "The map shows where we are.", alternatives: ["The map indicates our current location."], category: "顯示 (Show vs Tell)", analysis: "地圖是視覺媒介，它用『呈現』(show) 的，不是用『說』(tell) 的。", explanation: "根據媒介性質選擇動詞。" },
            { id: 20, chinese: "手冊解釋了如何使用產品。", chinglish: "The manual tells how to use it.", natural: "The manual explains how to use the product.", alternatives: ["The manual provides instructions on using the product."], category: "解釋 (Explain)", analysis: "手冊的功能是『解釋』(explain)，而非簡單的『告訴』(tell)。", explanation: "Explain 強調步驟與細節的說明。" }
        ];

        function App() {
            const [currentIndex, setCurrentIndex] = useState(0);
            const [showResult, setShowResult] = useState(false);
            const [userAttempt, setUserAttempt] = useState("");
            const [completed, setCompleted] = useState([]);
            const [score, setScore] = useState(0);
            const [streak, setStreak] = useState(0);
            const [lastBonus, setLastBonus] = useState(null);
            const [isFinished, setIsFinished] = useState(false);

            const currentTask = quizData[currentIndex];

            const handleReveal = () => {
                if (showResult) return;
                let points = 100;
                let bonus = [];
                if (userAttempt.trim().length > 5) { points += 20; bonus.push("勇敢嘗試 +20"); }
                const sBonus = streak * 10;
                if (sBonus > 0) { points += sBonus; bonus.push(`連勝加成 +${sBonus}`); }
                setShowResult(true);
                setScore(s => s + points);
                setStreak(s => s + 1);
                setLastBonus(bonus.join(" | "));
                if (!completed.includes(currentTask.id)) setCompleted([...completed, currentTask.id]);
            };

            const nextTask = () => {
                if (completed.length === quizData.length) { setIsFinished(true); return; }
                setShowResult(false); setUserAttempt(""); setLastBonus(null);
                setCurrentIndex(i => (i + 1) % quizData.length);
            };

            const reset = () => { setCurrentIndex(0); setShowResult(false); setUserAttempt(""); setCompleted([]); setScore(0); setStreak(0); setLastBonus(null); setIsFinished(false); };

            if (isFinished) return (
                <div className="min-h-screen bg-slate-50 flex items-center justify-center p-4">
                    <div className="max-w-md w-full bg-white rounded-[2.5rem] shadow-2xl p-10 text-center border border-slate-100">
                        <div className="w-24 h-24 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6 shadow-inner"><Icon name="party" className="w-12 h-12 text-yellow-600" /></div>
                        <h1 className="text-3xl font-black text-slate-800 mb-2">專項訓練完成！</h1>
                        <p className="mb-6 text-slate-500 font-medium">你已經掌握了 20 個關鍵動詞邏輯</p>
                        <div className="bg-indigo-50 rounded-[2rem] p-8 mb-8 border border-indigo-100">
                            <div className="text-xs text-indigo-400 font-black uppercase mb-2">FINAL SCORE</div>
                            <div className="text-6xl font-black text-indigo-600 mb-4">{score}</div>
                        </div>
                        <button onClick={reset} className="w-full py-5 bg-slate-900 text-white font-black rounded-2xl flex items-center justify-center gap-3"><Icon name="refresh" /> 重新訓練</button>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen bg-slate-50 p-4 md:p-8">
                    <div className="max-w-3xl mx-auto">
                        <header className="mb-8 flex flex-col md:flex-row justify-between items-center gap-6">
                            <div className="flex items-center gap-4">
                                <div className="p-4 bg-indigo-600 rounded-[1.2rem] shadow-xl text-white rotate-3"><Icon name="book" /></div>
                                <div><h1 className="text-2xl font-black text-slate-900 leading-tight">Chinglish Lab</h1><p className="text-[10px] text-slate-400 font-black uppercase">動詞結構專項訓練</p></div>
                            </div>
                            <div className="bg-white px-6 py-3 rounded-[1.5rem] shadow-sm border border-slate-200 flex items-center gap-5">
                                <div className="text-right"><span className="text-[9px] text-slate-400 font-black block uppercase">Score</span><span className="text-2xl font-black text-slate-800 tabular-nums">{score}</span></div>
                                <div className="w-px h-10 bg-slate-100"></div>
                                <div className="text-right"><span className="text-[9px] text-slate-400 font-black block uppercase">Streak</span><div className="flex items-center gap-1"><Icon name="flame" className={`w-5 h-5 ${streak > 0 ? 'text-orange-500 fill-orange-500' : 'text-slate-200'}`} /><span className="text-2xl font-black text-slate-800 tabular-nums">{streak}</span></div></div>
                            </div>
                        </header>

                        <main className="bg-white rounded-[2.5rem] shadow-2xl overflow-hidden border border-slate-100 relative">
                            {lastBonus && <div className="absolute top-6 right-10 animate-bounce bg-yellow-400 text-yellow-900 text-[10px] font-black px-4 py-1.5 rounded-full border-2 border-white z-10">{lastBonus}</div>}
                            <div className="p-8 md:p-12">
                                <div className="flex justify-between items-center mb-10"><CategoryBadge category={currentTask.category} /><div className="text-[10px] font-black text-slate-300">挑戰 {currentIndex + 1} / {quizData.length}</div></div>
                                
                                <div className="mb-10 relative"><div className="absolute -left-2 top-0 bottom-0 w-2 bg-indigo-600 rounded-full"></div><label className="text-[10px] font-black text-indigo-500 uppercase px-5 mb-3 flex items-center gap-2"><Icon name="languages" className="w-4 h-4" /> 中文語境 (Goal)</label><div className="text-3xl font-black text-slate-800 px-5 leading-tight">「{currentTask.chinese}」</div></div>
                                
                                <div className="mb-12"><div className="text-[10px] font-black text-red-400 uppercase mb-4 px-2">常見直譯錯誤</div><div className="text-xl font-semibold text-red-900/40 p-8 bg-red-50/20 rounded-[2rem] border-2 border-dashed border-red-100/50 flex items-start gap-5 italic leading-relaxed">“{currentTask.chinglish}”</div></div>
                                
                                {!showResult ? (
                                    <div className="space-y-5">
                                        <div className="flex justify-between px-3"><label className="text-[10px] font-black text-slate-400 uppercase">請輸入你修正後的英文：</label></div>
                                        <textarea className="w-full p-8 border-2 border-slate-100 rounded-[2rem] focus:border-indigo-500 outline-none text-xl bg-slate-50 shadow-inner" placeholder="這題的陷阱在動詞搭配..." rows="2" value={userAttempt} onChange={e => setUserAttempt(e.target.value)} />
                                        <button onClick={handleReveal} className="w-full py-6 bg-indigo-600 text-white font-black rounded-[2rem] shadow-xl flex items-center justify-center gap-4 text-lg hover:bg-indigo-700 transition-colors"><Icon name="info" /> 揭曉道地邏輯</button>
                                    </div>
                                ) : (
                                    <div className="space-y-10 animate-in fade-in slide-in-from-bottom-5">
                                        <div><label className="text-[10px] font-black text-green-600 uppercase mb-4 block px-3">道地英文表達</label><div className="text-3xl font-black text-slate-900 p-10 bg-green-50 rounded-[3rem] border-2 border-green-200 flex items-center gap-6 relative shadow-sm"><div className="absolute -top-3 -right-3 p-4 bg-green-500 rounded-2xl shadow-lg text-white"><Icon name="check" className="w-7 h-7" /></div>{currentTask.natural}</div></div>
                                        
                                        <div className="bg-amber-50 rounded-[3rem] p-10 border border-amber-100 relative shadow-inner">
                                            <div className="absolute -top-3 left-12 px-8 py-2 bg-amber-400 text-white text-[10px] font-black rounded-full shadow-xl">老師分析</div>
                                            <h3 className="font-black text-amber-950 flex items-center gap-3 mb-4 text-xl"><Icon name="message" className="w-7 h-7 text-amber-600" /> 解構錯誤</h3>
                                            <p className="text-amber-900 leading-relaxed mb-8 text-xl font-medium">{currentTask.analysis}</p>
                                            <div className="bg-white/90 p-8 rounded-[2rem] border border-amber-200 shadow-sm"><div className="flex items-center gap-3 mb-4 font-black text-amber-900/70 text-sm tracking-tight"><Icon name="info" className="w-6 h-6 text-amber-500" /> 思維切換：</div><p className="text-amber-900 text-lg italic leading-relaxed font-medium">{currentTask.explanation}</p></div>
                                        </div>

                                        {currentTask.alternatives && (
                                            <div className="bg-white p-6 rounded-2xl border border-slate-200">
                                                <div className="text-[10px] font-black text-slate-400 uppercase mb-3">你也可以這樣說：</div>
                                                <ul className="space-y-2">{currentTask.alternatives.map((a, i) => <li key={i} className="text-slate-600 text-sm font-semibold flex items-center gap-2"><div className="w-1 h-1 bg-slate-300 rounded-full"></div>{a}</li>)}</ul>
                                            </div>
                                        )}

                                        <button onClick={nextTask} className="w-full py-7 bg-slate-900 text-white font-black rounded-[2.2rem] flex items-center justify-center gap-4 text-xl hover:bg-black transition-colors"><span>下一步</span><Icon name="chevron" /></button>
                                    </div>
                                )}
                            </div>
                        </main>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
