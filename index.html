<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinglish Lab - 中式英語除錯實驗室</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM CDN -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel CDN for JSX compilation in browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .animate-bounce-slow { animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(-5%); } 50% { transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 selection:bg-indigo-100 selection:text-indigo-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- SVG 圖標組件 (避免外部依賴) ---
        const Icon = ({ name, className = "w-6 h-6" }) => {
            const icons = {
                trophy: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>,
                star: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>,
                flame: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>,
                award: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="8" r="6"/><path d="M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"/></svg>,
                book: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1-2.5-2.5Z"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2Z"/></svg>,
                languages: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m5 8 6 6"/><path d="m4 14 6-6 2-3"/><path d="M2 5h12"/><path d="M7 2h1"/><path d="m22 22-5-10-5 10"/><path d="M14 18h6"/></svg>,
                message: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>,
                info: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>,
                check: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="20 6 9 17 4 12"/></svg>,
                chevron: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="9 18 15 12 9 6"/></svg>,
                refresh: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 16h5v5"/></svg>,
                party: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M14 21a7 7 0 1 1 0-14 7 7 0 0 1 0 14z"/><path d="m14 14 7 7"/><path d="m14 14-7-7"/><path d="m14 14 7-7"/><path d="m14 14-7 7"/></svg>
            };
            return icons[name] || null;
        };

        const quizData = [
            { id: 1, chinese: "這個告示牌叫大家不要亂丟垃圾。", chinglish: "The sign noticed the public don't throw trash.", natural: "The sign reminds the public not to litter.", alternatives: ["The sign says 'No Littering'.", "The sign warns people against littering."], category: "動詞誤用 & 句型結構", analysis: "1. 誤用 noticed (察覺)。 2. 缺少 'not to'。Tell/Remind 某人做某事需使用 'to V'。", explanation: "英文中告示牌『說話』用 says，『提醒』用 reminds。" },
            { id: 1.1, chinese: "這個規定要求我們穿制服。", chinglish: "This rule requests us wear uniforms.", natural: "This rule requires us to wear uniforms.", alternatives: ["We are required to wear uniforms by this rule.", "The rule states that we must wear uniforms."], category: "動詞誤用 & 句型結構", analysis: "Require/Request 後面接人做某事，必須接不定詞 'to V'。", explanation: "這類『要求/命令/建議』的動詞，後方的動作需要 to 來連接。" },
            { id: 1.2, chinese: "簡訊通知我要開會。", chinglish: "The message noticed me have a meeting.", natural: "The message notified me that there is a meeting.", alternatives: ["The message reminded me about the meeting.", "The message informed me of the meeting."], category: "動詞誤用 & 句型結構", analysis: "Notice 是『看見/察覺』，要『告知』某人應用 notify 或 inform。", explanation: "中文的『通知』在英文中有主動告知 (Notify) 與被動發現 (Notice) 的區別。" },
            { id: 2, chinese: "我很喜歡這部電影。", chinglish: "I very like this movie.", natural: "I really like this movie.", alternatives: ["I like this movie very much.", "I'm a big fan of this movie."], category: "副詞位置", analysis: "Very 不能修飾動詞。應改用 Really 或放在句尾的 Very much。", explanation: "Very 是程度副詞，通常修飾形容詞（Very good），不修飾動詞。" },
            { id: 2.1, chinese: "我非常相信他。", chinglish: "I very believe him.", natural: "I strongly believe him.", alternatives: ["I really believe him.", "I believe him completely."], category: "副詞位置", analysis: "『非常』相信，英文常用 strongly, truly 或 completely。", explanation: "動詞的『強度』在英文中有特定的副詞搭配，而不只是 Very。" },
            { id: 2.2, chinese: "他很怕蜘蛛。", chinglish: "He very fears spiders.", natural: "He is very afraid of spiders.", alternatives: ["He really fears spiders.", "Spiders terrify him."], category: "副詞位置", analysis: "如果用動詞 fear，不能加 very。若要用 very，必須用形容詞結構 'is very afraid of'。", explanation: "區分動詞 (Fear) 與形容詞 (Afraid) 的用法。" },
            { id: 3, chinese: "別忘了吃藥。", chinglish: "Don't forget to eat medicine.", natural: "Don't forget to take your medicine.", alternatives: ["Remember to take your meds.", "You should take your medication on time."], category: "動詞搭配 (Collocation)", analysis: "英文中服用藥物統一使用 'take'。", explanation: "這就是所謂的固定搭配。我們『吃』食物，但『服用』藥物。" },
            { id: 3.1, chinese: "寫日記。", chinglish: "Write a diary.", natural: "Keep a diary.", alternatives: ["Write in a journal.", "Start a diary."], category: "動詞搭配 (Collocation)", analysis: "『寫』日記強調的是長期保存紀錄的動作，用 keep 更有連貫感。", explanation: "Write 是一次性的動作，Keep 才有持續習慣的含意。" },
            { id: 3.2, chinese: "參加考試。", chinglish: "Join an exam.", natural: "Take an exam.", alternatives: ["Sit for an exam.", "Do an exam."], category: "動詞搭配 (Collocation)", analysis: "Join 是加入組織或活動。參加考試這種測試性質的行為用 take。", explanation: "考試是『接受』測試，所以用 Take。" },
            { id: 4, chinese: "今天很熱。", chinglish: "Today is very hot.", natural: "It is very hot today.", alternatives: ["The weather is hot today.", "It's boiling today."], category: "虛擬主詞", analysis: "描述天氣、時間、距離必須使用虛擬主詞 'It'。", explanation: "英文句子像天平，必須有一個虛擬的 'It' 來平衡主格位置。" },
            { id: 4.1, chinese: "現在五點了。", chinglish: "Now is five o'clock.", natural: "It is five o'clock now.", alternatives: ["It's 5 PM.", "The time is 5:00."], category: "虛擬主詞", analysis: "Now 是副詞，不能當主詞。時間必須由 It 引導。", explanation: "時間句型中，It 代表的是『當下的狀態』。" },
            { id: 4.2, chinese: "到機場要花一小時。", chinglish: "To the airport needs one hour.", natural: "It takes an hour to get to the airport.", alternatives: ["Getting to the airport takes an hour.", "The drive to the airport is one hour."], category: "虛擬主詞", analysis: "『花費時間』通常使用 'It takes (time) to do something' 句型。", explanation: "這是最常用的生活句型，主詞永遠是 It。" },
            { id: 5, chinese: "這裡有很多人。", chinglish: "Here has many people.", natural: "There are many people here.", alternatives: ["Many people are gathering here.", "This place is crowded."], category: "存在句型", analysis: "表達某處有某物存在，必須用 'There is/are'。Has 只能用於主動擁有的主語。", explanation: "地點不能『擁有』人，只能說『那裡存在著』人。" },
            { id: 5.1, chinese: "桌子上有杯咖啡。", chinglish: "The table has a cup of coffee.", natural: "There is a cup of coffee on the table.", alternatives: ["A cup of coffee is on the table.", "Someone left a coffee on the table."], category: "存在句型", analysis: "除非桌子會長出咖啡，否則請用 There is。", explanation: "區分『具備性質』與『地理位置的存在』。" },
            { id: 5.2, chinese: "冰箱裡沒有牛奶了。", chinglish: "In the fridge has no milk.", natural: "There is no milk in the fridge.", alternatives: ["The fridge is out of milk.", "We've run out of milk in the fridge."], category: "存在句型", analysis: "中文喜歡把地點放前面，但英文必須先說『有/沒有』。", explanation: "There is/are 是英文表達『有無』的最核心句型。" },
            { id: 6, chinese: "等我五分鐘。", chinglish: "Wait me five minutes.", natural: "Wait for me for five minutes.", alternatives: ["Give me five minutes.", "Could you wait for me?"], category: "介系詞遺漏", analysis: "Wait 是不及物動詞，後面接人必須加 'for'。", explanation: "中文動詞通常直接吃掉受詞，但英文動詞常需要一座介系詞橋樑。" },
            { id: 6.1, chinese: "聽老師說話。", chinglish: "Listen the teacher.", natural: "Listen to the teacher.", alternatives: ["Listen to what the teacher says.", "Pay attention to the teacher."], category: "介系詞遺漏", analysis: "Listen 後面接對象時，永遠要加 'to'。", explanation: "聽音樂是 Listen to music，聽我是 Listen to me。" },
            { id: 6.2, chinese: "回覆我的電子郵件。", chinglish: "Reply my email.", natural: "Reply to my email.", alternatives: ["Please respond to my email.", "Answer my email."], category: "介系詞遺漏", analysis: "Reply 後面接訊息時，必須加 'to'。若不加介系詞，應改用 Answer。", explanation: "Reply to = Respond to = Answer (無 to)。" }
        ];

        const CategoryBadge = ({ category }) => {
            const colors = {
                "動詞誤用 & 句型結構": "bg-blue-100 text-blue-700",
                "副詞位置": "bg-purple-100 text-purple-700",
                "動詞搭配 (Collocation)": "bg-green-100 text-green-700",
                "虛擬主詞": "bg-orange-100 text-orange-700",
                "存在句型": "bg-red-100 text-red-700",
                "介系詞遺漏": "bg-teal-100 text-teal-700"
            };
            return <span className={`px-3 py-1 rounded-full text-xs font-bold ${colors[category] || "bg-gray-100"}`}>{category}</span>;
        };

        function App() {
            const [currentIndex, setCurrentIndex] = useState(0);
            const [showResult, setShowResult] = useState(false);
            const [userAttempt, setUserAttempt] = useState("");
            const [completed, setCompleted] = useState([]);
            const [score, setScore] = useState(0);
            const [streak, setStreak] = useState(0);
            const [lastBonus, setLastBonus] = useState(null);
            const [isFinished, setIsFinished] = useState(false);

            const currentTask = quizData[currentIndex];

            const handleReveal = () => {
                if (showResult) return;
                let points = 100;
                let bonus = [];
                if (userAttempt.trim().length > 5) { points += 20; bonus.push("勇敢嘗試 +20"); }
                const sBonus = streak * 10;
                if (sBonus > 0) { points += sBonus; bonus.push(`連勝加成 +${sBonus}`); }
                setShowResult(true);
                setScore(s => s + points);
                setStreak(s => s + 1);
                setLastBonus(bonus.join(" | "));
                if (!completed.includes(currentTask.id)) setCompleted([...completed, currentTask.id]);
            };

            const nextTask = () => {
                if (completed.length === quizData.length) { setIsFinished(true); return; }
                setShowResult(false); setUserAttempt(""); setLastBonus(null);
                setCurrentIndex(i => (i + 1) % quizData.length);
            };

            const reset = () => { setCurrentIndex(0); setShowResult(false); setUserAttempt(""); setCompleted([]); setScore(0); setStreak(0); setLastBonus(null); setIsFinished(false); };

            if (isFinished) return (
                <div className="min-h-screen bg-slate-50 flex items-center justify-center p-4">
                    <div className="max-w-md w-full bg-white rounded-[2.5rem] shadow-2xl p-10 text-center border border-slate-100">
                        <div className="w-24 h-24 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6 shadow-inner"><Icon name="party" className="w-12 h-12 text-yellow-600" /></div>
                        <h1 className="text-3xl font-black text-slate-800 mb-2">訓練完成！</h1>
                        <div className="bg-indigo-50 rounded-[2rem] p-8 mb-8 border border-indigo-100">
                            <div className="text-xs text-indigo-400 font-black uppercase mb-2">FINAL SCORE</div>
                            <div className="text-6xl font-black text-indigo-600 mb-4">{score}</div>
                        </div>
                        <button onClick={reset} className="w-full py-5 bg-slate-900 text-white font-black rounded-2xl flex items-center justify-center gap-3"><Icon name="refresh" className="w-6 h-6" /> 重新開始</button>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen bg-slate-50 p-4 md:p-8">
                    <div className="max-w-3xl mx-auto">
                        <header className="mb-8 flex flex-col md:flex-row justify-between items-center gap-6">
                            <div className="flex items-center gap-4">
                                <div className="p-4 bg-indigo-600 rounded-[1.2rem] shadow-xl shadow-indigo-100 rotate-3 text-white"><Icon name="book" /></div>
                                <div><h1 className="text-2xl font-black text-slate-900">Chinglish Lab</h1><p className="text-[10px] text-slate-400 font-black uppercase">Logic-First Training</p></div>
                            </div>
                            <div className="bg-white px-6 py-3 rounded-[1.5rem] shadow-sm border border-slate-200 flex items-center gap-5">
                                <div className="text-right"><span className="text-[9px] text-slate-400 font-black block uppercase">Score</span><span className="text-2xl font-black text-slate-800">{score}</span></div>
                                <div className="w-px h-10 bg-slate-100"></div>
                                <div className="text-right"><span className="text-[9px] text-slate-400 font-black block uppercase">Streak</span><div className="flex items-center gap-1"><Icon name="flame" className={`w-5 h-5 ${streak > 0 ? 'text-orange-500 fill-orange-500' : 'text-slate-200'}`} /><span className="text-2xl font-black text-slate-800">{streak}</span></div></div>
                            </div>
                        </header>

                        <main className="bg-white rounded-[2.5rem] shadow-2xl overflow-hidden border border-slate-100 relative">
                            {lastBonus && <div className="absolute top-6 right-10 animate-bounce bg-yellow-400 text-yellow-900 text-[10px] font-black px-4 py-1.5 rounded-full border-2 border-white">{lastBonus}</div>}
                            <div className="p-8 md:p-12">
                                <div className="flex justify-between items-center mb-10"><CategoryBadge category={currentTask.category} /><div className="flex items-center gap-2 bg-slate-50 px-4 py-1.5 rounded-full border text-[10px] font-black"><Icon name="trophy" className="w-4 h-4 text-yellow-500" /> 除錯專家</div></div>
                                <div className="mb-10 relative group"><div className="absolute -left-2 top-0 bottom-0 w-2 bg-indigo-600 rounded-full"></div><label className="text-[10px] font-black text-indigo-500 uppercase px-5 mb-3 flex items-center gap-2"><Icon name="languages" className="w-4 h-4" /> Translation Goal</label><div className="text-4xl font-black text-slate-800 px-5 leading-tight">「{currentTask.chinese}」</div></div>
                                <div className="mb-12"><div className="text-[10px] font-black text-red-400 uppercase mb-4 px-2">Typical Mistake</div><div className="text-xl font-semibold text-red-900/40 p-8 bg-red-50/20 rounded-[2rem] border-2 border-dashed border-red-100/50 flex items-start gap-5 italic italic leading-relaxed">“{currentTask.chinglish}”</div></div>
                                
                                {!showResult ? (
                                    <div className="space-y-5">
                                        <div className="flex justify-between px-3"><label className="text-[10px] font-black text-slate-400 uppercase">Your Version:</label><div className="flex items-center gap-1.5"><Icon name="star" className="w-3.5 h-3.5 text-yellow-500 fill-yellow-500" /><span className="text-[9px] text-slate-400 font-bold uppercase italic">Bonus for typing</span></div></div>
                                        <textarea className="w-full p-8 border-2 border-slate-100 rounded-[2rem] focus:border-indigo-500 outline-none text-xl bg-slate-50 shadow-inner" placeholder="Think first..." rows="2" value={userAttempt} onChange={e => setUserAttempt(e.target.value)} />
                                        <button onClick={handleReveal} className="w-full py-6 bg-indigo-600 text-white font-black rounded-[2rem] shadow-xl flex items-center justify-center gap-4 text-lg"><Icon name="info" /> Reveal Analysis</button>
                                    </div>
                                ) : (
                                    <div className="space-y-10">
                                        <div><label className="text-[10px] font-black text-green-600 uppercase mb-4 block px-3 tracking-widest">Natural English</label><div className="text-3xl font-black text-slate-900 p-10 bg-green-50 rounded-[3rem] border-2 border-green-200 flex items-center gap-6 relative shadow-sm"><div className="absolute -top-3 -right-3 p-4 bg-green-500 rounded-2xl shadow-lg text-white"><Icon name="check" className="w-7 h-7" /></div>{currentTask.natural}</div></div>
                                        <div className="bg-amber-50 rounded-[3rem] p-12 border border-amber-100 relative shadow-inner">
                                            <div className="absolute -top-3 left-12 px-8 py-2 bg-amber-400 text-white text-[10px] font-black rounded-full shadow-xl">EXPERT INSIGHT</div>
                                            <h3 className="font-black text-amber-950 flex items-center gap-3 mb-6 text-xl"><Icon name="message" className="w-7 h-7 text-amber-600" /> 為什麼直譯會出錯？</h3>
                                            <p className="text-amber-900 leading-relaxed mb-10 text-xl font-medium">{currentTask.analysis}</p>
                                            <div className="bg-white/90 p-8 rounded-[2rem] border border-amber-200 shadow-sm"><div className="flex items-center gap-3 mb-4 font-black text-amber-900/70 text-sm tracking-tight"><Icon name="info" className="w-6 h-6 text-amber-500" /> 思維轉換：</div><p className="text-amber-900 text-lg italic leading-relaxed font-medium">{currentTask.explanation}</p></div>
                                        </div>
                                        <button onClick={nextTask} className="w-full py-7 bg-slate-900 text-white font-black rounded-[2.2rem] flex items-center justify-center gap-4 text-xl"><span className="text-xl">Next Challenge</span><Icon name="chevron" /></button>
                                    </div>
                                )}
                            </div>
                        </main>
                        <footer className="mt-16 text-center text-slate-300 text-[9px] font-black uppercase tracking-[0.3em]">Chinglish Lab &copy; 2026</footer>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
